<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forms test</title>
</head>
<body>

<style>
  body {
    margin: 20px;
  }

  section {
    margin-bottom: 20px;
  }
</style>

<script type="text/javascript">
  window.$ = document.querySelector.bind(document)
  window.$.onready = f => window.addEventListener("DOMContentLoaded", f)
</script>

<section>
  <div id="context-1">
    <span id="hello">Hello</span>
  </div>
  <div id="context-2">
    <spam>world!</spam>
  </div>
</section>

<section>
  <button id="delayed-node-trigger">Add delayed node</button>
  <script type="text/javascript">
    $.onready(() => {
      const trigger = $("#delayed-node-trigger")
      trigger.addEventListener("click", () => {
        setTimeout(() => {
          if (!$("#delayed-node")) {
            const node = document.createElement("h2")
            node.setAttribute("id", "delayed-node")
            node.innerText = "Delayed node added"
            trigger.parentNode.append(node)
          }
        }, 500)
      })
    })
  </script>
</section>

<section>
  <select id="select">
    <option value="f" selected>Foo</option>
    <option value="b">Bar</option>
    <option value="t">Tsers</option>
  </select>
  <div></div>
  <script type="text/javascript">
    $.onready(() => {
      const select = $("#select")
      const text = $("#select + div")
      const selection = () =>
        [...select.options]
          .filter(o => o.selected)
          .map(o => o.text)
          .join(", ") || "-"
      text.innerText = "Selection: " + selection()
      select.addEventListener("change", e => {
        text.innerText = "Selection: " + selection()
      })
    })
  </script>
</section>

<section>
  <select multiple id="multiselect">
    <option value="f">Foo</option>
    <option value="b">Bar</option>
    <option value="t">Tsers</option>
  </select>
  <div></div>
  <script type="text/javascript">
    $.onready(() => {
      const select = $("#multiselect")
      const text = $("#multiselect + div")
      const selection = () =>
        [...select.options]
          .filter(o => o.selected)
          .map(o => o.text)
          .join(", ") || "-"
      text.innerText = "Multiselection: " + selection()
      select.addEventListener("change", e => {
        text.innerText = "Multiselection: " + selection()
      })
    })
  </script>
</section>

<section>
  <input id="input" type="text" value="lolbal"/>
  <div></div>
  <script type="text/javascript">
    $.onready(() => {
      const input = $("#input")
      const text = $("#input + div")
      text.innerText = "Input value is: " + (input.value || "")
      input.addEventListener("input", e => {
        text.innerText = "Input value is: " + (e.target.value || "")
      })
    })
  </script>
</section>

<section>
  <textarea id="textarea" style="width: 200px; height: 200px;">Tsers!</textarea>
  <div></div>
  <script type="text/javascript">
    $.onready(() => {
      const textarea = $("#textarea")
      const text = $("#textarea + div")
      text.innerText = "Textarea value is: " + (textarea.value || "")
      textarea.addEventListener("input", e => {
        text.innerText = "Textarea value is: " + (e.target.value || "")
      })
    })
  </script>
</section>

<section>
  <input name="rad" type="radio" gr value="a"> Radio A
  <input name="rad" type="radio" value="b"> Radio B
</section>

<section>
  <input type="checkbox"> Check
</section>

<section id="lazy">
  <button onclick="setTimeout(function() { document.querySelector('#lazy input').removeAttribute('hidden') }, 1000)">
    Activate
  </button>
  <input hidden value=""/>
</section>

</body>
</html>